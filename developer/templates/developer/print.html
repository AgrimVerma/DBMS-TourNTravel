{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>TnT_Admin</title>

  <!-- CSS  -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="{% static 'css/materialize.css' %}" type="text/css" rel="stylesheet" media="screen,projection"/>
  <link href="{% static 'css/style.css' %}" type="text/css" rel="stylesheet" media="screen,projection"/>
</head>
<body>
  <nav class="black head" role="navigation" style="opacity: 95%;">
    <div class="nav-wrapper container">
      <a id="logo-container" href="#" class="brand-logo purple-text">Tours&Travels</a>
      <ul class="right hide-on-med-and-down">
        <li><a href="/print">Print</a></li>
        <li><a href="/admin">Update</a></li>
        <!-- <li><a class="purple-text" href="/index">User</a></li> -->
        <!-- Dropdown Trigger -->

        <a class='dropdown-trigger btn' href='#' data-target='dropdown1'>My Account</a>
        {% if request.session.current_user %}        
        <ul id='dropdown1' class='dropdown-content'>
          <li><a href="/account">Settings</a></li>
          <li><a href="/logout">Log Out</a></li>
        </ul>
        {% else %}
        <!-- Dropdown Structure -->
        <ul id='dropdown1' class='dropdown-content purple-text'>
          <li><a href="/login">Log In</a></li>
          <li><a href="/signup">Sign Up</a></li>
        </ul>
        {% endif %}
      </ul>
      
      <ul id="nav-mobile" class="sidenav">
        <li><a href="/">Tours&Travels</a></li>
        <li class="divider" tabindex="-1"></li>
        <li><a href="/print">Print</a></li>
        <li><a href="/admin">Update</a></li>
        <li><a class="purple-text" href="/index">User</a></li>
        <li class="divider" tabindex="-1"></li>
        {% if request.session.current_user %}        
        <li><a href="/account">Settings</a></li>
        <li><a href="/logout">Log Out</a></li>
        {% else %}
        <li><a class="purple-text" href="/login">Log In</a></li>
        <li><a class="purple-text" href="/signup">Sign Up</a></li>
        {% endif %}
      </ul>
      <a href="#" data-target="nav-mobile" class="sidenav-trigger"><i class="material-icons">menu</i></a>
    </div>
  </nav>

  {% block content %}

    <center><br><br>
      <div class="col l9 s8" style="height: 30em; overflow-y: scroll;">
        <table class="stripped" style="width: 80%;">
          <thead>
            
            <tr>
              <th>User</th>
              <th>Type</th>
              <th>Class</th>
              <th>Source</th>
              <th>Destination</th>
              <th>Book Date</th>
              <th>Total</th>
              <th>Card Number</th>
              
            </tr>
          </thead>
          <tbody>
            {% for obj in transactions  %}
            
            <tr>
              <td>{{obj.userID.email}}</td>
              {% if obj.bookingID.Hotel != Null  %}
                    <td>Hotel</td>
                    <td>NULL</td>
                    <td>NULL</td>
                    <td>{{obj.bookingID.Hotel.city}}</td>
                    
                  {% elif obj.bookingID.Flight != Null %}
                  <td>Flight</td>
                  <td>{{obj.Type}}</td>
                    
                    <td>{{obj.bookingID.Flight.sourceLocation}}</td>
                    <td>{{obj.bookingID.Flight.destinationLocation}}</td>
                  {% else %}<td>Train</td>
                  <td>{{obj.Type}}</td>
                    
                    <td>{{obj.bookingID.Train.sourceLocation}}</td>
                    <td>{{obj.bookingID.Train.destinationLocation}}</td>
                  
                {% endif %}

              <td>{{obj.transactionDate}}</td>
              <td>Rs {{obj.paymentID.amount}}</td>
              <td>{{obj.paymentID.cardNo}}</td>
            </tr>
            {% endfor %}
          </table>
        </div>
        <br><br>
    </center>
    
  {% endblock content %}

  <footer class="page-footer black" style="opacity: 95%;">
    <div class="container">
      <div class="row">
        <div class="col l8 s8">
          <h5 class="white-text">Team TnT</h5>
          <p class="grey-text text-lighten-4">We are a team of college students working hard to provide the best possible service to users.</p>
        </div>
        <!-- <div class="col l4 s4">
          <h5 class="white-text">More</h5>
          <ul>
            <li><a class="white-text" href="https://bchetanrao.github.io">Our design</a></li>
          </ul>
        </div> -->
      </div>
    </div>
    <div class="footer-copyright">
      <div class="container">
        Made by- <span style="padding-left: 3em;">Agrim Verma</span> <span style="padding-left: 3em;">Shantanu</span> <span style="padding-left: 3em;"><a class="white-text" href="https://github.com/Krishna3267">Krishna Shah</a></span> <span style="padding-left: 3em;">Neel patel</span>
     </div>
    </div>
  </footer>
  </body>

    <!--  Scripts-->
  <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
  <script src="{% static 'js/materialize.js' %}"></script>
  <script src="{% static 'js/init.js' %}"></script>
  <script>
    $('.dropdown-trigger').dropdown();

    M.textareaAutoResize($('#textarea1'));
      
    $('.datepicker').datepicker({
      format: 'yyyy-mm-dd',
       selectMonths: true, // Creates a dropdown to control month
        selectYears: 15, // Creates a dropdown of 15 years to control year,
        today: 'Today',
        clear: 'Clear',
        close: 'Ok',
        closeOnSelect: true,
        autoClose:true
        });

    $('input.autocomplete').autocomplete({
      data: {
        "New york": null,
        "tokyo": null,
        
      },
    });
  </script>
</html>
